import{i as b}from"./index-18acf776.js";import{d as P,r as C,o as V,a as F,c as M,b as e,w as s,e as o,f as y,F as j,g as R,h as n,i as p,t as _,j as k,n as A,k as U,_ as $}from"./index-2a5e17aa.js";const q={class:"monitoring-container"},G={class:"monitor-card"},H={class:"card-info"},J={class:"card-title"},K={class:"card-header"},Q={class:"card-header"},W={class:"card-header"},X={class:"header-left"},Y=P({__name:"index",setup(Z){const D=C([{title:"当前温度",value:"25.6℃",status:"normal"},{title:"当前压力",value:"1.02MPa",status:"normal"},{title:"湿度",value:"45%",status:"warning"},{title:"设备状态",value:"运行中",status:"normal"}]),g=C([{time:"2024-03-20 10:00:00",location:"储存区A",type:"温度异常",level:"警告",status:"已处理"},{time:"2024-03-20 09:30:00",location:"生产区B",type:"压力异常",level:"危险",status:"处理中"}]);let r=null,i=null;const B=()=>{const a=document.getElementById("temperatureChart");if(!a)return;r=b(a);const t={tooltip:{trigger:"axis"},xAxis:{type:"time",splitLine:{show:!1}},yAxis:{type:"value",name:"温度(℃)",splitLine:{show:!0,lineStyle:{type:"dashed"}}},series:[{name:"温度",type:"line",smooth:!0,data:m()}]};r.setOption(t)},L=()=>{const a=document.getElementById("pressureChart");if(!a)return;i=b(a);const t={tooltip:{trigger:"axis"},xAxis:{type:"time",splitLine:{show:!1}},yAxis:{type:"value",name:"压力(MPa)",splitLine:{show:!0,lineStyle:{type:"dashed"}}},series:[{name:"压力",type:"line",smooth:!0,data:m()}]};i.setOption(t)},m=()=>{const a=new Date().getTime(),t=[];for(let c=-20;c<=0;c++)t.push([a+c*1e3,Math.random()*10+20]);return t},T=a=>({normal:"success",warning:"warning",error:"danger"})[a]||"info",I=a=>({已处理:"success",处理中:"warning",未处理:"danger"})[a]||"info";let v;const z=()=>{if(r&&i){const a=m();r.setOption({series:[{data:a}]});const t=m();i.setOption({series:[{data:t}]})}},O=a=>({当前温度:"Thermometer",当前压力:"Odometer",湿度:"Sunny",设备状态:"Monitor"})[a]||"More",S=a=>a.status==="未处理"?"warning-row":"",E=a=>{console.log("处理报警",a)};return V(()=>{B(),L(),v=setInterval(z,3e3)}),F(()=>{clearInterval(v),r==null||r.dispose(),i==null||i.dispose()}),(a,t)=>{const c=o("el-icon"),f=o("el-card"),h=o("el-col"),w=o("el-row"),u=o("el-tag"),x=o("el-button"),d=o("el-table-column"),N=o("el-table");return y(),M("div",q,[e(w,{gutter:24,class:"monitor-cards"},{default:s(()=>[(y(!0),M(j,null,R(D.value,l=>(y(),k(h,{span:6,key:l.title},{default:s(()=>[e(f,{shadow:"hover","body-style":{padding:"20px"}},{default:s(()=>[n("div",G,[n("div",{class:A(["card-icon",l.status])},[e(c,{size:24},{default:s(()=>[(y(),k(U(O(l.title))))]),_:2},1024)],2),n("div",H,[n("div",J,_(l.title),1),n("div",{class:A(["card-value",l.status])},_(l.value),3)])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(w,{gutter:24,class:"chart-section"},{default:s(()=>[e(h,{span:12},{default:s(()=>[e(f,{class:"chart-card"},{header:s(()=>[n("div",K,[t[1]||(t[1]=n("span",{class:"title"},"温度实时监控",-1)),e(u,{effect:"plain",type:"success"},{default:s(()=>t[0]||(t[0]=[p("实时更新")])),_:1})])]),default:s(()=>[t[2]||(t[2]=n("div",{id:"temperatureChart",style:{height:"380px"}},null,-1))]),_:1})]),_:1}),e(h,{span:12},{default:s(()=>[e(f,{class:"chart-card"},{header:s(()=>[n("div",Q,[t[4]||(t[4]=n("span",{class:"title"},"压力实时监控",-1)),e(u,{effect:"plain",type:"success"},{default:s(()=>t[3]||(t[3]=[p("实时更新")])),_:1})])]),default:s(()=>[t[5]||(t[5]=n("div",{id:"pressureChart",style:{height:"380px"}},null,-1))]),_:1})]),_:1})]),_:1}),e(f,{class:"alert-card"},{header:s(()=>[n("div",W,[n("div",X,[t[6]||(t[6]=n("span",{class:"title"},"报警记录",-1)),e(u,{effect:"plain",type:"danger",class:"alert-count"},{default:s(()=>[p(_(g.value.length)+" 条未处理 ",1)]),_:1})]),e(x,{type:"primary",link:""},{default:s(()=>t[7]||(t[7]=[p("查看全部")])),_:1})])]),default:s(()=>[e(N,{data:g.value,style:{width:"100%"},"max-height":400,"row-class-name":S},{default:s(()=>[e(d,{prop:"time",label:"时间",width:"180"}),e(d,{prop:"location",label:"位置",width:"180"}),e(d,{prop:"type",label:"类型",width:"120"}),e(d,{prop:"value",label:"数值",width:"120",align:"center"}),e(d,{prop:"level",label:"等级",width:"100"},{default:s(l=>[e(u,{type:T(l.row.level),effect:l.row.status==="未处理"?"light":"plain",size:"small"},{default:s(()=>[p(_(l.row.level),1)]),_:2},1032,["type","effect"])]),_:1}),e(d,{prop:"status",label:"状态",width:"100"},{default:s(l=>[e(u,{type:I(l.row.status),effect:l.row.status==="未处理"?"light":"plain",size:"small"},{default:s(()=>[p(_(l.row.status),1)]),_:2},1032,["type","effect"])]),_:1}),e(d,{label:"操作",width:"120",fixed:"right"},{default:s(l=>[e(x,{type:"primary",link:"",size:"small",disabled:l.row.status==="已处理",onClick:tt=>E(l.row)},{default:s(()=>t[8]||(t[8]=[p(" 处理 ")])),_:2},1032,["disabled","onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])}}});const at=$(Y,[["__scopeId","data-v-d760d3f3"]]);export{at as default};
